# Metadata

This document describes the metadata generated by this software (and consequently by the Acquisition Station).
Metadata can be generated automatically based on the acquisition process (marked `A`) or filled in manually (marked `M`).

Currently, to get the complete metadata for a particular object, one has to look at links to other objects as well (i.e. `Artefact` -> `DigitalizationTool`). In the future it is likely that some relationships will be flattened to facilitate a more complete record of a particular object type.

## Objects

While there are more object types supported by this software for interaction with other systems, only objects that are both generated by this software and are created for the purpose of archivation will be listed here.

### Artefact

Artefact represents a digitized version of a physical media.

| Attribute | A/M | Type | Comment |
|-|-|-|-|
| Name | M | String | User-provided name of the artefact. |
| PhysicalMediaState | M | String | State of the actual physical media that was digitized. |
| Archiver | M | String | Name or identifier of the person who performed the digitalization. |
| Note | M | String | Additional note about this specific artefact. |
| ArchivationDate | A | DateTime | Date and time when digitalization of this artefact was performed. |
| PhysicalMediaType | A | Enumeration | Which physical media type this artifact originated from (i.e. `AudioCassette`, `Floppy35`, `CD`). As each type has its own digitalization tool, this is clearly indicated by the tool selection. Actual values depend on the current implementation and available tools. See the `PhysicalMediaType` enumeration type for values. |
| Type | A | Enumeration | What is the data type of this artefact. Depending on the digitalization tool and source media, this attribute indicates what is actually saved in the repository (i.e. `SfmFloppy`, `WavAudio`, `ZipArchive`). See the `ArtefactType` enumeration type for values. |
| OriginalFilename | A | String | The original name of the uploaded file or digitized media, if available. |

| Link attribute | Linked type | Comment |
|-|-|-|
| Version | `Archive.Version` | The version of the work that this artefact belongs to. |
| DigitalizationTool | `Digitalization.DigitalizationTool` | The specific tool that was used to create this artefact. Includes the environment in which the tool ran, version, etc. See the DigitalizationTool object metadata for details. |

### DigitalizationTool

Digitalization tools are specified in a configuration file (and must be supported). Manual entry in this case means the tool's configuration section.

| Attribute | A/M | Type | Comment |
|-|-|-|-|
| PhysicalMedia | M | Enumeration | Which physical media can this particular tool digitize. Is stored as a string in the DB. |
| Name | A | String | Name of the tool as specified by the tool handler's implementation. |
| Version | A | String | Version of the tool as detected during startup. Currently a different tool version is basically a new tool for the purposes of this software. |
| Environment | A | String | An environment string generated by the tool handler's implementation, usually a combination of runtime and OS version. |

### Converter

Converter tools are also specified in a configuration file. As such, manual entry also means the tool's configuration.

| Attribute | A/M | Type | Comment |
|-|-|-|-|
| Name | A | String | Name of the tool as specified by the tool handler's implementation. |
| Version | A | String | Version of the tool as detected during startup. Currently a different tool version is basically a new tool for the purposes of this software. |
| Environment | A | String | An environment string generated by the tool handler's implementation, usually a combination of runtime and OS version. |
| SupportedArtefactTypes | A | List of Enumeration | List of `Digitalization.ArtefactType` which can be converted by this tool (i.e. `SfmFloppy`, `IsoImage`, etc.). |
| Configuration | M | String | The configuration of this specific tool instance. Tools are configured per-emulator, so there can exist multiple instances of the same tool with different configuration depending on the conversion needed by the emulator. |

### Emulator

Emulator metadata consists exclusively of configuration values since this application does not do the actual emulation, nor does it manage the emulation environments or store them. Environments are stored in the accompanying EaaS installation and only referenced here by their ID.

| Attribute | A/M | Type | Comment |
|-|-|-|-|
| Name | M | String | Name of the emulator as specified in this application's configuration. |
| Homepage | M | URL | The emulator's homepage URL. |

| Link attribute | Linked type | Comment |
|-|-|-|
| Platforms | `List<Emulation.Platform>` | List of `Emulation.Platform` enum values expressing which platforms this emulator supports. |
| Environments | `List<Emulation.EmulationEnvironment>` | List of `Emulation.EmulationEnvironment` that include this specific emulator. Required conversions depend on the environment as that specifies the final emulator version and required conversions. |

### EmulationEnvironment

An emulator environment is mostly a configuration construct pairing a VM on the EaaS side with an installed emulator and conversion tool that are required to get an artefact (or a set of artefacts) in a format compatible with the emulator.

| Attribute | A/M | Type | Comment |
|-|-|-|-|
| EmulatorVersion | M | String | Part of the configuration of this emulation environment. Used to differentiate `GamePackage` compatibility with an environment. |
| EaasId | M | String | ID of the environment used to start it inside EaaS. |

| Link attribute | Linked type | Comment |
|-|-|-|
| Emulator | `Emulation.Emulator` | The emulator that is installed in this environment.  |
| Converters | `IEnumerable<Emulation.Converter>` | A list of converters which can be used to convert various artefact formats to this emulator's format. When creating a `GamePackage`, one of these is selected for each artefact to include in the package. |

### GamePackage

A collection of artefacts converted for a specific emulator version.

| Attribute | A/M | Type | Comment |
|-|-|-|-|
| ConversionDate | A | DateTime | When the conversion of artefacts and their consolidation into a package took place. |

| Link attribute | Linked type | Comment |
|-|-|-|
| IncludedArtefacts | `IEnumerable<Artefact>` | Artefacts which are included in this package. |
| Version | `Archive.Version` | Which version of a game/work this package belongs to. |
| Environment | `Emulation.EmulationEnvironment` | For which emulation environment (installed emulator version) was this package created. |
| Converter | `Emulation.Converter` | Which converter was used to create this package. |
| Paratexts | `IEnumerable<Paratext>` | Paratexts created in relation to this package, mainly recordings captured during emulation. |

### Paratext

Paratexts can belong either to a work, a version of a work, or a game package. The link attributes are filled out depending on that.
The automatic/manual column is filled based on whether this is a recording from game package emulation or a manual upload. Not all of these are necessarily needed for archiving.

| Attribute | A/M | Type | Comment |
|-|-|-|-|
| Name | A | String | Name of the paratext. This is manual if the paratext itself is a manual upload. |
| Description | A | String | Description is automatic when the paratext is a recording, otherwise it is manual. |
| Source | A | String | Is set to `"SessionRecording"` when the paratext is a recording, otherwise is a manual input. |
| SourceUrl | A | String | Is set to `null` when the paratext is a recording, otherwise is a manual input. |
| Downloadable | A | Boolean | A recording is always downloadable. For manually uploaded paratexts this depends on if the paratext has a file, or is just a reference. |
| Filename | A | String | If the paratext is a recording or an uploaded file, this is the original filename. |
| Thumbnail | A | String | If the paratext is a recording or an uploaded file, this is an url to get a thumbnail. |


| Link attribute | Linked type | Comment |
|-|-|-|
| Work | `Archive.Work` | Work which this paratext belongs to, always filled out. |
| Version | `Archive.Version` | Version of a work this paratext belongs to, can be `null`. This will be filled out if the paratext is a gameplay recording of a game package. |
| GamePackage | `Emulation.GamePackage` | Game package this paratext/recording was generated from, can be `null`. |
